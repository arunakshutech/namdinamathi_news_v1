"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1909],{41909:function(e,s,a){a.r(s),a.d(s,{default:function(){return f}});var l=a(85893),i=a(67294),n=a(84565),r=a.n(n),t=a(9559),c=a(17702),d=a(9473),o=a(96751),m=a(86501),u=a(77200);a(60481),a(63211);var g=a(53938),h=a(69744),v=()=>(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"formLoaderWrapper",children:(0,l.jsx)("div",{className:"formLoader"})})}),j=a(11163),x=a(19942),f=()=>{let[e,s]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[f,N]=(0,i.useState)(""),[_,p]=(0,i.useState)(!1),y=(0,j.useRouter)(),S=(0,d.v9)(o.Aj),b=(0,d.v9)(g.A3),Z=(0,d.v9)(h.oX),[k,w]=(0,i.useState)(null==b?void 0:b.length),E=(0,d.v9)(h.dy);(0,i.useEffect)(()=>{var e;let a=null==Z?void 0:null===(e=Z.user_category)||void 0===e?void 0:e.category_id;(0,t.Yc)({offset:0,limit:k,language_id:S.id,onSuccess:e=>{s(e.data.map(e=>{let s=a&&a.includes(e.id);return{...e,isToggledOn:s}})),n(!1)},onError:e=>{"No Data Found"===e&&(s(""),n(!1))}})},[S]),(0,i.useEffect)(()=>{w(null==b?void 0:b.length)},[k,S]);let O=e=>{s(s=>{let a=s.map(s=>s.id===e?{...s,isToggledOn:!s.isToggledOn}:s),l=a.filter(e=>e.isToggledOn).map(e=>e.id);return N(0===l.length?0:l.join(",")),a})},P=e=>{e.preventDefault(),p(!0),""!==f?(0,t.gY)({category_id:f,onSuccess:e=>{var s;m.ZP.success(e.message),p(!1),(null==E?void 0:null===(s=E.data)||void 0===s?void 0:s.is_login)==="0"&&y.push("/"),(0,h.Sq)({onSuccess:e=>{if(e&&0===e.data.status)return m.ZP.error("You are deactivated by admin!"),signOut(authentication).then(()=>{logoutUser(),y.push("/")}).catch(e=>{m.ZP.error(e)}),!1},onError:e=>{console.log(e)}})},onError:e=>{m.ZP.error(e)}}):(p(!1),m.ZP.error("Please select categories"))},C={width:"100%",marginLeft:"3rem",marginRight:"3rem"};return(0,l.jsx)(u.default,{children:(0,l.jsx)("section",{className:"manage_preferences py-5",children:(0,l.jsx)("div",{className:"container",children:a?(0,l.jsx)("div",{className:"row",children:[void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"col-md-4 col-12",children:(0,l.jsx)(x.Z,{})},s))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"row",children:e&&e.length>0?e.map(e=>(0,l.jsx)("div",{className:"col-md-4 col-12",children:(0,l.jsx)("div",{className:"manage_card",children:(0,l.jsxs)("div",{className:"inner_manage",children:[(0,l.jsx)("div",{className:"manage_image",children:(0,l.jsx)("img",{src:e.image,alt:e.category_name,onError:c.jM})}),(0,l.jsx)("div",{className:"manage_title",children:(0,l.jsx)("p",{className:"mb-0",children:e.category_name})}),(0,l.jsx)("div",{className:"manage_toggle",children:(0,l.jsx)(r(),{checked:e.isToggledOn,onlabel:"ON",onstyle:"success",offlabel:"OFF",offstyle:"danger",style:C,onChange:()=>O(e.id)})})]})})},e.id)):null}),(0,l.jsx)("button",{className:"finalsumit_btn mb-5 commonBtn",onClick:e=>P(e),children:_?(0,l.jsx)(v,{}):(0,c.Iu)("saveLbl")})]})})})})}},19942:function(e,s,a){var l=a(85893);a(67294);var i=a(50549);s.Z=()=>(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("div",{className:"textSkeleton allCatSkeleton",children:[(0,l.jsx)(i.Z,{height:100,width:"100%"}),(0,l.jsxs)("div",{className:"innerDiv",children:[(0,l.jsx)(i.Z,{height:30,width:60,className:"categoryBadge"}),(0,l.jsx)(i.Z,{height:30,width:40,className:"title"})]})]})})}}]);